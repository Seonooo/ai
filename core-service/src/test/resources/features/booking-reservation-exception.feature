# language: ko
@exception @reservation
기능: 예약 예외 처리
  예약 과정에서 발생할 수 있는 부정적인 비즈니스 시나리오를 검증한다

  배경:
    Given 예약 가능한 콘서트 스케줄이 존재한다
    And 유효한 대기열 토큰을 보유하고 있다

  # ==========================================
  # 예약 실패 시나리오
  # ==========================================

  시나리오: 존재하지 않는 좌석을 예약할 수 없다
    When 존재하지 않는 좌석 ID로 예약을 요청한다
    Then 요청된 예약이 거부된다
    And 좌석을 찾을 수 없다는 메시지가 반환된다

  시나리오: 다른 사용자의 예약을 조회할 수 없다
    Given 다른 사용자가 생성한 예약이 존재한다
    When 해당 예약 조회를 요청한다
    Then 조회가 거부된다
    And 접근 권한이 없다는 메시지가 반환된다

  시나리오: 이미 확정된 예약을 취소할 수 없다
    Given 내가 생성한 예약이 이미 확정(Payment Completed) 상태이다
    When 해당 예약 취소를 요청한다
    Then 요청된 취소가 거부된다
    And 이미 확정된 예약이라는 메시지가 반환된다

  시나리오: 만료된 예약을 결제할 수 없다
    Given 내가 생성한 예약이 만료(Time Expired)되었다
    When 해당 예약에 대해 결제를 요청한다
    Then 요청된 결제가 거부된다
    And 만료된 예약이라는 메시지가 반환된다
